webpackJsonp([11],{2690:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1180),u=i(a),o=n(1179),r=i(o);t.default=(0,u.default)("#wiki-clone-dialog","clone-wiki-dialog",{preHideCallback:r.default.callback}),e.exports=t.default},2873:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){(0,i.publishScreenEvent)("wikiScreen")};var i=n(34);e.exports=t.default},3273:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(3918),u=i(a),o=n(190),r=i(o);i(n(189)).default.add({"components/clone/clone-dialog":function(){return n(409)},"components/clone/clone-in-sourcetree":function(){return n(466)},"components/clone/clone-wiki-contextual":function(){return n(2690)},"components/clone/url-dropdown":function(){return n(410)},"components/mathjax":function(){return n(1204)},"repo/index":function(){return n(424)},"repo/sidebar":function(){return n(477)},"wiki/views/screen":function(){return n(2873)}}),window.__router__=(0,r.default)({"/:owner/:slug/wiki":{"create/?":u.default,"edit/(.*)":u.default}}).init()},3305:function(e,t){var n="wiki",i=n||"unknownBundle";window._moduleTiming=window._moduleTiming||{},window._moduleTiming[i]=(new Date).getTime()-window._moduleTiming[i]},3306:function(e,t){var n="wiki",i=n||"unknownBundle";window._moduleTiming=window._moduleTiming||{},window._moduleTiming[i]=(new Date).getTime()},3575:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),u=i(a),o=n(12),r=i(o),l=n(49),s=i(l);t.default=s.default.Behavior.extend({initialize:function(){this._warnHandler=function(){if(r.default.result(this.options,"condition"))return r.default.result(this.options,"message")}.bind(this),(0,u.default)(window).on("beforeunload",this._warnHandler)},onDestroy:function(){(0,u.default)(window).off("beforeunload",this._warnHandler)},defaults:{condition:!0,message:gettext("Your changes will be lost. Are you sure you want to leave?")}}),e.exports=t.default},3630:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(15),u=i(a),o=n(7),r=i(o),l=n(49),s=i(l),d=n(12),f=i(d);n(223);var c=n(3575),g=i(c),p=n(234),h=i(p);t.default=s.default.ItemView.extend({behaviors:function(){return{WarnsOnPageChange:{behaviorClass:g.default,condition:function(){return this.getContent()!==this.initialContent&&!this._submitting}.bind(this)}}},events:{"keydown @ui.textarea":"checkForSubmission"},ui:{textarea:"textarea"},initialize:function(){this.bindUIElements(),this.initialContent=this.getContent(),this.language=this.$el.data("markup-type")||"markdown",this.listenForSubmission()},getContent:function(){return this.ui.textarea.val()},render:function(){return this.ui.textarea.markItUp((0,h.default)(f.default.result(this,"markItUpOptions"))),this.bindUIElements(),this},listenForSubmission:function(){var e=this.ui.textarea[0].form;e&&(0,r.default)(e).on("submit",function(){this._submitting=!0}.bind(this))},checkForSubmission:function(e){e.keyCode===u.default.keyCode.ENTER&&e.metaKey&&e.target.form&&e.target.form.submit()}}),e.exports=t.default},3631:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),u=i(a),o=n(49),r=i(o);t.default=r.default.ItemView.extend({languageNames:{markdown:"Markdown",creole:"Creole",rest:"reStructuredText",textile:"Textile"},events:{"click a":"updateLanguage","aui-dropdown2-show":"setActive"},initialize:function(e){this.$languageBtn=e.$languageBtn,this.language=e.language,this.on("change:language",function(e){this.language=e,this.render()})},render:function(){return this._buttonAuified||(this.auifyButton(),this._buttonAuified=!0),this.updateLabel(this.language),this},updateLanguage:function(e){e.preventDefault(),this.trigger("change:language",(0,u.default)(e.target).data("markupLang"))},auifyButton:function(){this.$languageBtn.removeClass("hidden").find("a").addClass("aui-dropdown2-trigger aui-dropdown2-trigger-arrowless aui-style-default").attr({"aria-haspopup":"true","aria-owns":"dropdown-wiki-lang","data-container":"#markItUpId_data"})},updateLabel:function(e){this.$languageBtn.find("a").text(this.languageNames[e]).append('<span class="aui-icon-dropdown"></span>')},setActive:function(){this.$("li a").removeClass("active"),this.$('a[data-markup-lang="'+this.language+'"]').addClass("active")}}),e.exports=t.default},3669:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),u=i(a),o=n(3630),r=i(o),l=n(3631),s=i(l);t.default=r.default.extend({markItUpOptions:function(){return{syntax:this.language,isWiki:!0}},initialize:function(){r.default.prototype.initialize.call(this)},render:function(){return r.default.prototype.render.call(this),this._createDropdown(),this},setLanguage:function(e){this.language=e,this.$el.attr("data-markup-type",e).find("[class^=markup-type]").removeClass().addClass("markup-type-"+e),this.trigger("change:language",e)},_createDropdown:function(){this.languageDropdown=new s.default({el:(0,u.default)("#dropdown-wiki-lang"),$languageBtn:this.$(".markItUpButton.language"),language:this.language}).render(),this.listenTo(this.languageDropdown,"change:language",this.setLanguage)}}),e.exports=t.default},3918:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var i=(0,u.default)("#wiki-edit"),a=i.find(".textarea-preview"),o=i.data("isCreate"),l=i.find("#id_markup_type");new r.default({el:a}).render().on("change:language",function(e){return l.val(e)}),o&&i.find("#id_path").focus()};var a=n(7),u=i(a),o=n(3669),r=i(o);e.exports=t.default},3990:function(e,t,n){n(3306),n(3273),e.exports=n(3305)}},[3990]);
//# sourceMappingURL=wiki.js.map